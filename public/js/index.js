!function(t){function e(c){if(n[c])return n[c].exports;var a=n[c]={i:c,l:!1,exports:{}};return t[c].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,c){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:c})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){"use strict";function c(t){var e={type:"get",url:"",params:null,callback:function(){}},n=Object.assign({},e,t),c=new XMLHttpRequest;if("get"==n.type&&n.params){for(var a="",o=0;o<n.params.length;o++)a+=o+"="+n.params[o];c.open(n.type,n.url+a,!0),c.send()}else c.open(n.type,n.url,!0),c.send(n.params);c.onreadystatechange=function(){4==c.readyState&&200==c.status&&n.callback(JSON.parse(c.responseText))}}function a(t,e){window.jsonp_callback=function(t){e(t)};var n=document.createElement("script");n.src=t+"&callback=jsonp_callback",document.body.appendChild(n)}function o(t){console.log(window);var e=decodeURIComponent(location.search.slice(1)),n=e.split("&"),c={};return n.forEach(function(t,e){var n=t.split("=");c[n[0]]=n[1]}),t?c[t]:c}function r(){var t=document.createElement("div");t.className="loading",t.innerHTML='<div class=\'load_wrap\'>\n\t\t\t\t<div class="circle circle-index1"></div>\n\t\t\t\t<div class="circle circle-index2"></div>\n\t\t\t\t<div class="circle circle-index3"></div>\n\t\t\t\t<div class="circle circle-index4"></div>\n\t\t\t\t<div class="circle circle-index5"></div>\n\t\t\t\t<div class="circle circle-index6"></div>\n\t\t\t\t<div class="circle circle-index7"></div>\n\t\t\t\t<div class="circle circle-index8"></div>\n\t\t\t</div>',this.startLoading=function(e){var n=void 0;n="string"==typeof e?document.querySelector(e):"object"==(void 0===e?"undefined":i(e))?e:document.querySelector("container"),this.parentDom=n,n.appendChild(t)},this.stopLoading=function(){this.parentDom.removeChild(t)}}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(t){var e=document.querySelectorAll(t);return Node.prototype.bind||(Node.prototype.bind=function(t,e,n){this.addEventListener("click",function(t){t.target.tagName.toLowerCase()==e&&n(t,e)},!1)}),NodeList.prototype.bind||(NodeList.prototype.bind=function(t,e,n){this.forEach(function(t,e){t.addEventListener("click",function(){n(t,e)},!1)})}),1==e.length?e[0]:e},s=new r;e.ajax=c,e.jsonp=a,e.getParams=o,e.loading=s,e.element=l},function(t,e,n){"use strict";function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}return function(e,n,c){return n&&t(e.prototype,n),c&&t(e,c),e}}();e.mycalendar=function(){function t(e){c(this,t);var n={initDate:new Date,callback:function(){}},a=Object.assign({},n,e),o=a.initDate.getFullYear(),r=a.initDate.getMonth()+1;this.year=o,this.month=r,this.day=a.initDate.getDate(),this.checkInDate=document.querySelector(".check-in-date"),this.check=document.querySelector(".checkDate"),this.calendarWrap=document.querySelector("#calendar-wrap"),this.calendarTitle=document.querySelector(".calendar_title"),this.check_InDate=document.querySelector(".check-inDate"),this.callback=a.callback,this.render(o,r),this.updateTitle(o,r),this.bindEvent()}return a(t,[{key:"getDays",value:function(t,e){var n=[1,3,5,7,8,12];return 2==this.month?this.year%4==0&&this.year%100!=0||this.year%400==0?29:28:n.indexOf(this.month)>-1?31:30}},{key:"updateTitle",value:function(t,e){this.calendarTitle.querySelector("h3").innerHTML=t+"年"+e+"月"}},{key:"startInOneMonth",value:function(t,e){return new Date(t+"/"+e+"/1").getDay()}},{key:"renderPrevMonth",value:function(t,e){var n=new Date(t+"/"+(e-1)),c=this.getDays(n.getFullYear(),n.getMonth()+1),a=this.startInOneMonth(t,e),o="";for(a-=1;a>=0;)o+="<span class='togray calendar-day'>"+(c-a)+"</span>",a--;return o}},{key:"renderCurrentMonth",value:function(t,e){for(var n="",c=1,a=this.getDays(t,e);c<=a;)n+=c==this.day?"<span class='calendar-day high'>"+c+"</span>":c<this.day?"<span class='calendar-day over'>"+c+"</span>":"<span class='calendar-day'>"+c+"</span>",c++;return n}},{key:"render",value:function(t,e){document.querySelector(".calendar_month").innerHTML=this.renderPrevMonth(t,e)+this.renderCurrentMonth(t,e)}},{key:"bindEvent",value:function(){var t=this;this.calendarWrap.addEventListener("click",function(e){var n=e.target;if(!n.classList.contains("calendar-day")||n.classList.contains("togray")||n.classList.contains("over")||(document.querySelector(".high").classList.remove("high"),n.classList.add("high"),t.check_in_ele.innerHTML=t.month+"月"+n.innerHTML+"日",t.check.innerHTML=t.month+"月"+document.querySelector(".high").innerHTML+"日"),n.classList.contains("prev")){var c=new Date(t.year,t.month-1-1),a=c.getFullYear(),o=c.getMonth()+1;t.render(a,o),t.year=a,t.month=o,t.updateTitle(a,o)}if(n.classList.contains("next")){var r=new Date(t.year,t.month-1+1),i=r.getFullYear(),l=r.getMonth()+1;t.render(i,l),t.year=i,t.month=l,t.updateTitle(i,l)}if(n.classList.contains("finish")){var s=1*document.querySelector(".countNight").value,u=new Date(t.year,t.month-1,1*document.querySelector(".high").innerHTML+1*document.querySelector(".countNight").value);t.callback(u.getFullYear(),u.getMonth()+1,u.getDate(),s),t.hide()}if(n.classList.contains("del")){var d=1*document.querySelector(".countNight").value;if((d-=1)<0)return;document.querySelector(".countNight").value=d}if(n.classList.contains("add")){var h=1*document.querySelector(".countNight").value;h+=1,document.querySelector(".countNight").value=h}},!1)}},{key:"show",value:function(t){this.check_in_ele=t,this.calendarWrap.classList.add("selectCity-active")}},{key:"hide",value:function(){this.calendarWrap.classList.remove("selectCity-active")}}]),t}()},,function(t,e,n){"use strict";function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}return function(e,n,c){return n&&t(e.prototype,n),c&&t(e,c),e}}();e.City=function(){function t(e){c(this,t);var n={data:[]},a=Object.assign({},n,e);this.opt=a,this.moreList=document.querySelector(".moreList"),this.citiesFrame=document.querySelector(".citiesFrame"),this.selectCity=document.querySelector("#selectCity"),this.render(a.data),this.collectCityHeight(),this.bindEvent()}return a(t,[{key:"render",value:function(t){var e=this.moreList,n=this.citiesFrame,c="",a="";t.forEach(function(t,e){c+='<span alpha="'+t.alpha+'">'+t.alpha+"</span>",a+="<div>\n\t\t\t\t\t\t\t<div class='split-line current' alpha='"+t.alpha+"'>"+t.alpha+"</div>\n\t\t\t\t\t\t\t<ul class='list'>\n\t\t\t\t\t\t\t\t"+t.data.map(function(t,e){return"<li>"+t[0]+"</li>"}).join("")+"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t   </div>"}),e.innerHTML=c,n.innerHTML=a}},{key:"collectCityHeight",value:function(){var t=document.querySelectorAll("[alpha]"),e={};Array.from(t).forEach(function(t,n){e[t.getAttribute("alpha")]=t.offsetTop}),this.obj=e}},{key:"bindEvent",value:function(){var t=this;this.selectCity.addEventListener("click",function(e){var n=e.target;if("SPAN"==n.tagName&&(t.selectCity.scrollTop=t.obj[n.getAttribute("alpha")]),"LI"==n.tagName){t.hide();document.querySelector(".backtop").classList.remove("show"),t.opt.callback(n.innerHTML)}"SPAN"==n.tagName&&n.classList.contains("back")&&t.hide()},!1)}},{key:"show",value:function(){this.selectCity.classList.add("selectCity-active"),this.selectCity.scrollTop=0}},{key:"hide",value:function(){this.selectCity.classList.remove("selectCity-active")}}]),t}()},function(t,e,n){"use strict";function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var c=e[n];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}return function(e,n,c){return n&&t(e.prototype,n),c&&t(e,c),e}}();e.hotCity=function(){function t(e){c(this,t);var n={data:[]},a=Object.assign({},n,e);this.hotList=document.querySelector(".hotList"),this.render(a.data)}return a(t,[{key:"render",value:function(t){var e=this.hotList,n="";for(var c in t)n+="<li>"+t[c]+"</li>";e.innerHTML=n}}]),t}()},,function(t,e,n){"use strict";var c=n(0),a=n(3),o=n(4),r=n(1),i=[document.querySelector(".banner ul"),""],l=i[0],s=i[1];(0,c.ajax)({url:"../../server/banner.json",callback:function(t){t.forEach(function(t,e){s+="<li class='swiper-slide' style=\"background:url("+t.url+');background-size:100% 100%;" ><a href="#" title="'+t.title+'"></a></li>',l.innerHTML=s}),new Swiper(".banner",{autoplay:1500,loop:!0})}}),(0,c.ajax)({url:"../../server/cities.json",callback:function(t){var e=new a.City({data:t,callback:function(t){document.querySelector(".stayPlace").innerHTML=t+'<em class="iconfont icon-jiantouyou"></em>'}});document.querySelector(".check-in-hotel").addEventListener("click",function(){e.show()},!1)}}),(0,c.ajax)({url:"../../server/hotcity.json",callback:function(t){new o.hotCity({data:t})}});var u=[document.querySelector("#selectCity"),document.querySelector(".backtop")],d=u[0],h=u[1];d.onscroll=function(){var t=document.body.clientHeight;d.scrollTop>=t?h.classList.add("show"):h.classList.remove("show")},h.onclick=function(){d.scrollTop=0};var y=document.querySelector(".check-inDate"),p=(document.querySelector(".checkInDate"),document.querySelector(".abc")),f=new Date,v=f.getFullYear(),m=f.getMonth()+1,g=f.getDate();f.getHours()>16&&(f=new Date(v+"-"+m+"-"+g),v=f.getFullYear(),m=f.getMonth()+1,g=f.getDate()),y.innerHTML=m+"月"+g+"日";var b=new Date(v+"/"+m+"/"+(g+1)),k=(b.getFullYear(),b.getMonth()+1),S=b.getDate();p.innerHTML=k+"月"+S+"日";var L=document.querySelector(".check-in-date"),w=document.querySelector(".check-out-date"),q=document.querySelector(".calendar_back"),M=new r.mycalendar({initDate:new Date,callback:function(t,e,n,c){document.querySelector(".abc").innerHTML=e+"月"+n+"日",document.querySelector(".allNight").innerHTML=c}});L.addEventListener("click",function(){document.querySelector(".countNight").value="1",M.show(y)},!1),w.addEventListener("click",function(){document.querySelector(".countNight").value="1",M.show(p)}),q.addEventListener("click",function(){M.hide()},!1),document.querySelector(".position").onclick=function(t){t.stopPropagation(),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var e=t.coords;console.log(e),(0,c.jsonp)("http://apis.map.qq.com/ws/geocoder/v1/?location="+e.latitude+","+e.longitude+"key=2YSBZ-LS536-ICUSD-MSZ6B-Q5B23-OVBDN&output=jsonp",function(t){console.log(t.result)})},function(t){switch(t.code){case t.TIMEOUT:console.log("A timeout occured! Please try again!");break;case t.POSITION_UNAVAILABLE:console.log("We can't detect your location. Sorry!");break;case t.PERMISSION_DENIED:console.log("Please allow geolocation access for this to work.");break;case t.UNKNOWN_ERROR:console.log("An unknown error occured!")}(0,c.jsonp)("http://apis.map.qq.com/ws/location/v1/ip?key=2YSBZ-LS536-ICUSD-MSZ6B-Q5B23-OVBDN&output=jsonp",function(t){console.log(t)})},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e3}):alert("Your browser does not support Geolocation!")};var T=document.querySelector(".search"),D=(document.querySelector(".hotelList_Wrap"),document.querySelector(".hotelList_Con"));document.querySelector(".hotelList_back");T.onclick=function(){var t=document.querySelector(".stayPlace").innerText,e=y.innerHTML,n=w.querySelector(".abc").innerHTML,a=document.querySelector(".inputName").value,o="list.html?city_name="+t+"&checkIn="+e+"&checkOut="+n;a&&(o+="&hotel_name"+a),window.location.href=o,(0,c.ajax)({url:"../../server/hotel.json",callback:function(t){var e="";t.result.hotel_list.forEach(function(t,n){e+='<dl>\n\t\t\t\t\t\t<dt><img src="'+t.image+'"></dt>\n\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t<h2>'+t.name+"</h2>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span class='score'>4.7分</span>\n\t\t\t\t\t\t\t\t<span class='li'>礼</span>\n\t\t\t\t\t\t\t\t<span class='priceStart'><em>￥"+t.low_price+"</em>起</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span>"+t.stars+"</span>\n\t\t\t\t\t\t\t\t<span class='iconfont icon-wifi'></span>\n\t\t\t\t\t\t\t\t<span class='iconfont icon-p'></span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<span class='address'>"+t.addr+"</span>\n\t\t\t\t\t\t\t\t<span>"+t.distance+"km</span>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</dd>\n\t\t\t\t\t  </dl> "}),D.innerHTML=e}})}}]);